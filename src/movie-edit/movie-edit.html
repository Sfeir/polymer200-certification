<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../../bower_components/iron-form/iron-form.html">
<link rel="import" href="../../bower_components/iron-input/iron-input.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/iron-icons/av-icons.html">
<link rel="import" href="../../bower_components/iron-icons/social-icons.html">
<link rel="import" href="../../bower_components/iron-icons/editor-icons.html">


<dom-module id="movie-edit">
    <template>
        <style include="iron-flex iron-flex-alignment">
            :host {
                display: block;
                width: 100%;
            }


            paper-card {
                background-color: white;
                margin: 10px;
                padding: 15px;
            }

            paper-input {
                margin-left: 20px;
            }

        </style>

        <!-- ROUTES DATAS -->
        <app-location id="location"></app-location>
        <app-route
                route="{{route}}"
                pattern="/:id"
                data="{{routeData}}"
                tail="{{subroute}}">
        </app-route>



        <section class="layout vertical center-justified">
            <paper-card class="people">
                <form is="iron-form" id="form" method="post">
                    <section class="layout vertical">
                        <section class="column">
                            <div class="layout horizontal">
                                <paper-input class="flex" id="title"  name="title" label="Titre*"
                                             value="{{currentMovie.title}}">
                                    <iron-icon icon="av:movie" prefix></iron-icon>
                                </paper-input>
                                <paper-input class="flex" id="releaseYear"  name="releaseYear" label="Année*"
                                             value="{{currentMovie.releaseYear}}">
                                    <iron-icon icon="watch-later" prefix></iron-icon>
                                </paper-input>
                            </div>
                            <div class="layout horizontal">
                                <paper-input class="flex" type="text" id="director" name="director" label="Réalisateur"
                                             value="{{currentMovie.directors}}">
                                    <iron-icon icon="social:person" prefix></iron-icon>
                                </paper-input>
                                <paper-input class="flex" id="rate"  name="rate" label="Note"
                                             value="{{currentMovie.rate}}">
                                    <iron-icon icon="star" prefix></iron-icon>
                                </paper-input>
                            </div>
                            <div class="">
                                <paper-input type="text" id="actors" name="actors" label="Acteurs"
                                             value="{{currentMovie.actors}}">
                                    <iron-icon icon="social:people" prefix></iron-icon>
                                </paper-input>
                            </div>
                            <div class="">
                                <paper-input type="text" id="synopsis" name="synopsis" label="Synopsis"
                                             value="{{currentMovie.synopsis}}">
                                    <iron-icon icon="editor:format-align-left" prefix></iron-icon>
                                </paper-input>
                            </div>
                        </section>
                    </section>
                </form>
                <section class="actions layout horizontal end-justified">
                    <paper-button on-click="backToList">Annulez</paper-button>
                    <paper-button on-click="editMovie">Valider</paper-button>
                </section>
            </paper-card>
        </section>
    </template>

    <script>
        Polymer({
            is: 'movie-edit',
            properties:{
                currentMovie: {
                    type: Object,
                    value: {},
                    notify: true
                }
            },
            isValid: function () {
                var valid=this.$.form.validate();
                return valid;
            },
            editMovie: function() {
                if(this.isValid()){
                    //Do something
                }
            },
            resetForm: function () {
                this.currentMovie={};
            },
            backToList:function(){
                this.$.location.set('path','/list/');
            }
        });
    </script>
</dom-module>
